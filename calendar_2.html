<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Shia Spiritual Routine - Task Calendar</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --islamic-green: #2d5a3d;
            --islamic-gold: #c9a961;
            --task-fajr: #4a90e2;      /* Blue for dawn */
            --task-morning: #f5a623;   /* Orange for morning sun */
            --task-dhuhr: #7ed321;     /* Bright green for midday */
            --task-asr: #50e3c2;       /* Teal for afternoon */
            --task-maghrib: #bd10e0;   /* Purple for sunset */
            --task-isha: #9013fe;      /* Deep purple for night */
            --task-night: #1e3a8a;     /* Dark blue for deep night */
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
        }

        .main-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin: 20px;
            padding: 30px;
        }

        .header {
            background: linear-gradient(135deg, var(--islamic-green), var(--islamic-gold));
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            color: white;
            text-align: center;
            box-shadow: 0 10px 20px rgba(45, 90, 61, 0.2);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .calendar-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .calendar-header {
            background: linear-gradient(135deg, var(--islamic-green), #4a6741);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .week-view {
            display: grid;
            grid-template-columns: 100px repeat(7, 1fr);
            background: white;
        }

        .time-column, .day-column {
            display: grid;
            grid-template-rows: 60px repeat(12, 80px); /* Header + 12 slots */
        }
        
        .time-column {
            background: #f8f9fa;
            border-right: 2px solid #e9ecef;
        }
        
        .time-header, .day-header {
             padding: 10px;
             text-align: center;
             font-weight: 700;
             border-bottom: 2px solid #dee2e6;
             display: flex;
             align-items: center;
             justify-content: center;
        }

        .day-header {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            color: var(--islamic-green);
            flex-direction: column;
        }

        .day-header.today {
            background: linear-gradient(135deg, var(--islamic-gold), #d4af37);
            color: white;
            box-shadow: inset 0 -4px 8px rgba(0,0,0,0.1);
        }

        .day-date { font-size: 1.2rem; }
        .day-name { font-size: 0.9rem; opacity: 0.9; }

        .time-slot, .hour-slot {
            padding: 5px;
            border-bottom: 1px dashed #e9ecef;
            border-right: 1px solid #e9ecef;
            position: relative;
        }
        
        .time-slot {
            font-size: 0.8rem;
            font-weight: 600;
            color: #495057;
            border-right: 2px solid #e9ecef;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .day-column .hour-slot:last-child { border-bottom: none; }
        .week-view > .day-column:last-child .hour-slot { border-right: none; }


        .task {
            background: linear-gradient(135deg, var(--task-color, #007bff), var(--task-color-light, #66b3ff));
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            border-left: 4px solid rgba(255, 255, 255, 0.5);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .task:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);
            z-index: 10;
            position: relative;
        }

        .task.fajr { --task-color: var(--task-fajr); --task-color-light: #6bb6ff; }
        .task.morning { --task-color: var(--task-morning); --task-color-light: #ffb84d; }
        .task.dhuhr { --task-color: var(--task-dhuhr); --task-color-light: #9aed4d; }
        .task.asr { --task-color: var(--task-asr); --task-color-light: #7aebdd; }
        .task.maghrib { --task-color: var(--task-maghrib); --task-color-light: #d147f0; }
        .task.isha { --task-color: var(--task-isha); --task-color-light: #b347ff; }
        .task.night { --task-color: var(--task-night); --task-color-light: #4f63d2; }

        .task-icon { margin-right: 6px; }

        .modal-content {
            border-radius: 15px;
            border: none;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--islamic-green), var(--islamic-gold));
            color: white;
            border-radius: 15px 15px 0 0;
            padding: 25px;
        }

        .modal-body {
            padding: 30px;
            line-height: 1.8;
            max-height: 70vh;
            overflow-y: auto;
        }

        .description-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid var(--islamic-gold);
        }
        .description-section ul { padding-left: 20px; }

        @media (max-width: 992px) {
            .week-view {
                grid-template-columns: 80px repeat(7, minmax(120px, 1fr));
                overflow-x: auto;
            }
            .main-container { margin: 10px; padding: 15px; }
            .header h1 { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-moon me-3"></i>Daily Shia Spiritual Routine</h1>
            <p class="mb-0">Building Barakah, Taqwa, and Inner Peace with Rizq Focus</p>
        </div>

        <!-- Calendar -->
        <div class="calendar-container">
            <div class="calendar-header">
                <h3><i class="fas fa-calendar-week me-2"></i>Weekly Schedule</h3>
                <span id="currentWeek" class="fw-bold fs-5">Current Week</span>
            </div>

            <div class="week-view" id="calendarGrid">
                <!-- Columns will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Task Detail Modal -->
    <div class="modal fade" id="taskModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fs-4">
                        <i id="modalTaskIcon" class="me-2"></i>
                        <span id="modalTaskTitle">Task Details</span>
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong><i class="fas fa-clock me-2 text-primary"></i>Time:</strong>
                            <span id="modalTaskTime">--</span>
                        </div>
                        <div class="col-md-6">
                            <strong><i class="fas fa-tag me-2 text-success"></i>Category:</strong>
                            <span id="modalTaskCategory">--</span>
                        </div>
                    </div>
                    <div class="description-section">
                        <h6><i class="fas fa-scroll me-2 text-info"></i>Description & Instructions:</h6>
                        <div id="modalTaskDescription">Task description will appear here...</div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <strong><i class="fas fa-gift me-2 text-danger"></i>Spiritual Benefits:</strong>
                            <ul id="modalTaskBenefits" class="mt-2 list-unstyled"></ul>
                        </div>
                        <div class="col-md-6">
                            <strong><i class="fas fa-book me-2 text-secondary"></i>References:</strong>
                            <div id="modalTaskReferences" class="mt-2 small text-muted"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Task data with detailed descriptions, organized by grid row index
            const tasks = [
                { // Row 1 (2:30 AM)
                    time: "2:30 AM",
                    title: 'Salat al-Layl',
                    category: 'Night',
                    className: 'night',
                    icon: 'fas fa-moon',
                    description: `
                        <p><strong>The most powerful act for sustenance & spiritual proximity.</strong></p>
                        <p>One of the strongest recommended acts, especially for increasing sustenance (rizq) and attaining nearness to Allah.</p>
                        <ul>
                            <li><strong>8 rak'at Nafilah of Layl:</strong> Prayed in sets of 2 rak'at.</li>
                            <li><strong>2 rak'at Salat al-Shafa':</strong> Follows the Nafilah.</li>
                            <li><strong>1 rak'ah Salat al-Witr:</strong> The final prayer. In its Qunoot (supplication), it is highly recommended to:</li>
                            <ul>
                                <li>Ask for forgiveness for 40 believers.</li>
                                <li>Recite "Astaghfirullah Rabbi wa Atubu Ilayh" 70 times.</li>
                                <li>Recite the Du'a "Hadha Maqamu al-'Aidh..." 7 times.</li>
                                <li>Ask for your needs, especially for halal rizq, health, and spiritual upliftment.</li>
                            </ul>
                        </ul>
                    `,
                    benefits: [ 'Drastically increases sustenance', 'Wipes away sins', 'Illuminates the face and heart', 'Eases the questioning in the grave'],
                    references: 'Numerous hadith from the Ahlulbayt (as) emphasize its importance for both worldly and spiritual gains.'
                },
                { // Row 2 (3:03 AM - Fajr Prayer)
                    time: "03:03 AM", // Using your specified time
                    title: 'Fajr Prayer & Dhikr',
                    category: 'Fajr',
                    className: 'fajr',
                    icon: 'fas fa-sun',
                    description: `
                        <p><strong>The foundational prayer and start of a blessed day.</strong></p>
                        <p>Praying Fajr on time and engaging in the subsequent dhikr sets a protective and blessed tone for the entire day.</p>
                        <ul>
                            <li>Recite Adhan and Iqama with intention.</li>
                            <li>Pray the 2 rak'at Fajr prayer with full concentration.</li>
                            <li><strong>Post-Prayer Dhikr:</strong>
                                <ul>
                                    <li><strong>Tasbih Fatimah (sa):</strong> 34x Allahu Akbar, 33x Alhamdulillah, 33x Subhanallah.</li>
                                    <li><strong>Du'a al-Sabah by Imam Ali (as):</strong> A beautiful and powerful morning supplication.</li>
                                    <li><strong>For Rizq:</strong> Repeat "Yaa Razzaaq" 100 times.</li>
                                </ul>
                            </li>
                        </ul>
                    `,
                    benefits: ['Divine protection throughout the day', 'Barakah in time and sustenance', 'Spiritual fortification', 'A witness for you on Judgment Day'],
                    references: 'Quran 17:78: "Indeed, the recitation of dawn is ever witnessed."'
                },
                { // Row 3 (5:00 AM)
                    time: "5:00 AM",
                    title: 'Morning Recitation',
                    category: 'Morning',
                    className: 'morning',
                    icon: 'fas fa-book-open',
                    description: `
                        <p><strong>Nourish the soul and seek blessings for the day's endeavors.</strong></p>
                        <p>Engage with the Quran in the blessed hours after Fajr. Avoid sleeping during this time as it is when sustenance is distributed.</p>
                        <ul>
                            <li><strong>Surah Waqi'ah:</strong> Famously narrated to prevent poverty and increase sustenance.</li>
                            <li><strong>Surah Yaseen:</strong> Known as the "Heart of the Quran," it fulfills needs and eases difficulties.</li>
                            <li><strong>Surah Mulk:</strong> Protects from the punishment of the grave.</li>
                            <li><strong>Before starting work/study:</strong> Recite Ayat al-Kursi for protection and Surah Qadr for increased blessings in your efforts.</li>
                        </ul>
                    `,
                    benefits: ['Invites immense Barakah', 'Protects from evil and envy', 'Increases provision (Rizq)', 'Imam Sadiq (as) advised seeking sustenance in the early morning.'],
                    references: 'Hadith: "Whoever recites Surah al-Waqi\'ah every night will never be afflicted by poverty." - Imam al-Sadiq (as)'
                },
                {}, // Row 4 (8:00 AM) - Empty
                {}, // Row 5 (12:00 PM) - Empty
                { // Row 6 (1:22 PM)
                    time: "1:22 PM",
                    title: 'Dhuhr Prayer & Du\'a',
                    category: 'Dhuhr',
                    className: 'dhuhr',
                    icon: 'fas fa-cloud-sun',
                    description: `
                        <p><strong>The midday prayer to recenter and seek guidance.</strong></p>
                        <p>Pause your worldly activities to connect with Allah at the zenith of the day. Praying on time is highly emphasized.</p>
                        <ul>
                            <li>Perform Wudu and pray the 4 rak'at Dhuhr prayer.</li>
                            <li><strong>After Prayer:</strong> Recite Tasbih Fatimah (sa).</li>
                            <li><strong>Du'a for Rizq (No. 14 from Duas.org):</strong> "Allahumma inni as’aluka min fadlika wa rahmatika fa innahu la yamlikuhuma illa ant." (A shorter, powerful version). The full du'a is also highly recommended.</li>
                            <li><strong>Optional:</strong> Pray the 8 rak'at Nafilah of Dhuhr before the main prayer.</li>
                        </ul>
                    `,
                    benefits: ['Keeps one grounded amidst worldly distractions', 'Fulfills a primary obligation', 'Source of blessings and forgiveness'],
                    references: 'Quran 2:238: "Guard strictly the prayers, especially the middle prayer..."'
                },
                { // Row 7 (5:47 PM)
                    time: "5:47 PM",
                    title: 'Asr Prayer & Qaylulah',
                    category: 'Asr',
                    className: 'asr',
                    icon: 'fas fa-cloud',
                    description: `
                        <p><strong>The afternoon prayer and a re-energizing Sunnah nap.</strong></p>
                        <p>The Asr prayer is the "middle prayer" mentioned in the Quran for which special emphasis is given.</p>
                        <ul>
                            <li>Pray the 4 rak'at Asr prayer, preferably in its early time.</li>
                            <li>Recite Tasbih Fatimah (sa) after the prayer.</li>
                            <li><strong>Optional Qaylulah (Nap):</strong> A short nap (20-40 mins) before or after Dhuhr/Asr is a Sunnah that boosts energy for worship and work in the latter part of the day.</li>
                        </ul>
                    `,
                    benefits: ['Increases afternoon productivity', 'Following a Sunnah of the Prophet (s)', 'Great reward for praying it on time'],
                    references: 'The "middle prayer" in Surah al-Baqarah (2:238) is often interpreted by the Ahlulbayt (as) as Salat al-Asr.'
                },
                {}, // Row 8 - Empty
                {}, // Row 9 - Empty
                { // Row 10 (10:15 PM)
                    time: "10:15 PM",
                    title: 'Maghrib Prayer & Du\'a',
                    category: 'Maghrib',
                    className: 'maghrib',
                    icon: 'fas fa-star-and-crescent',
                    description: `
                        <p><strong>Welcoming the night with prayer and gratitude.</strong></p>
                        <p>As the day concludes, the Maghrib prayer is an opportunity to thank Allah and seek forgiveness.</p>
                        <ul>
                            <li>Pray the 3 rak'at Maghrib prayer after sunset.</li>
                            <li>Recite Tasbih Fatimah (sa).</li>
                            <li><strong>Recite Surah Waqi'ah:</strong> This is the most famous and recommended time to recite it to prevent poverty.</li>
                            <li><strong>Du'a al-Rizq (No. 20 from Duas.org):</strong> A comprehensive du'a seeking abundant and pure sustenance.</li>
                        </ul>
                    `,
                    benefits: ['Secures one\'s faith', 'Acts as an expiation for sins committed during the day', 'The prime time for reciting Surah Waqi\'ah for Rizq'],
                    references: 'The evening prayer is mentioned as a key time of remembrance in the Quran.'
                },
                { // Row 11 (11:27 PM)
                    time: "11:27 PM",
                    title: 'Isha Prayer & Du\'a',
                    category: 'Isha',
                    className: 'isha',
                    icon: 'fas fa-satellite-dish',
                    description: `
                        <p><strong>The final obligatory prayer, sealing the day with devotion.</strong></p>
                        <p>The Isha prayer completes the five daily obligations and prepares the soul for a restful night.</p>
                        <ul>
                            <li>Pray the 4 rak'at Isha prayer.</li>
                            <li>Recite Tasbih Fatimah (sa).</li>
                            <li><strong>After Isha:</strong> Place your hand on your chest and recite the following names of Allah for opening the doors of sustenance and mercy: <br><em>“Ya Allahu, Ya Wahhabu, Ya Fattahu, Ya Razzaqu, Ya Kareem.”</em></li>
                            <li><strong>Optional:</strong> Pray the 2 rak'at Nafila of Isha (Salat al-Wutayra) while sitting.</li>
                        </ul>
                    `,
                    benefits: ['Completes the pillar of Salat for the day', 'Brings peace and tranquility before sleep', 'A specific du\'a to unlock sustenance'],
                    references: 'Completing the five prayers is the cornerstone of a Muslim\'s daily life.'
                },
                { // Row 12 (12:00 AM)
                    time: "12:00 AM",
                    title: 'Before Sleep Actions',
                    category: 'Night',
                    className: 'night',
                    icon: 'fas fa-bed',
                    description: `
                        <p><strong>Concluding the day with remembrance and protection.</strong></p>
                        <p>These short acts ensure one sleeps in a state of purity and under divine protection.</p>
                        <ul>
                            <li>Perform Wudu before going to bed.</li>
                            <li><strong>Recite:</strong>
                                <ul>
                                    <li>Ayat al-Kursi (for protection from Satan throughout the night).</li>
                                    <li>Surah al-Ikhlas (3 times, equivalent to reciting the whole Quran).</li>
                                    <li>Surah al-Falaq and Surah al-Nas (for protection from all evil).</li>
                                    <li>Surah Waqi'ah (if not recited after Maghrib).</li>
                                </ul>
                            </li>
                            <li>Recite the Tasbih of Lady Fatimah (sa).</li>
                        </ul>
                    `,
                    benefits: ['Protection through the night', 'Massive rewards for simple recitations', 'Ensures one dies upon faith if death occurs in sleep'],
                    references: 'Numerous hadith from the Prophet (s) and Imams (as) prescribe these specific recitations before sleep.'
                },
            ];

            const timeSlotsLabels = [
                "2:30 AM", "3:03 AM", "5:00 AM", "8:00 AM", "12:00 PM", "1:22 PM",
                "5:47 PM", "7:30 PM", "9:00 PM", "10:15 PM", "11:27 PM", "12:00 AM"
            ];
            
            const calendarGrid = document.getElementById('calendarGrid');
            const myModal = new bootstrap.Modal(document.getElementById('taskModal'));

            // --- Generate Calendar Structure ---
            function generateCalendar() {
                // 1. Create Time Column
                const timeColumn = document.createElement('div');
                timeColumn.className = 'time-column';
                timeColumn.innerHTML += `<div class="time-header"><i class="fas fa-clock"></i></div>`;
                timeSlotsLabels.forEach(label => {
                    timeColumn.innerHTML += `<div class="time-slot">${label}</div>`;
                });
                calendarGrid.appendChild(timeColumn);

                // 2. Create Day Columns
                const today = new Date();
                const currentDayOfWeek = today.getDay(); // 0=Sunday, 1=Monday...
                const startDate = new Date(today);
                startDate.setDate(today.getDate() - currentDayOfWeek); // Set to the last Sunday

                const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

                for (let i = 0; i < 7; i++) {
                    const dayDate = new Date(startDate);
                    dayDate.setDate(startDate.getDate() + i);

                    const dayColumn = document.createElement('div');
                    dayColumn.className = 'day-column';
                    
                    const dayHeader = document.createElement('div');
                    dayHeader.className = 'day-header';
                    if (i === currentDayOfWeek) {
                        dayHeader.classList.add('today');
                    }
                    dayHeader.innerHTML = `
                        <div class="day-date">${dayDate.getDate()}</div>
                        <div class="day-name">${dayNames[i]}</div>
                    `;
                    dayColumn.appendChild(dayHeader);

                    // Add hour slots and tasks
                    for (let j = 0; j < 12; j++) {
                        const hourSlot = document.createElement('div');
                        hourSlot.className = 'hour-slot';
                        
                        const taskData = tasks[j];
                        if (taskData && taskData.title) {
                            const taskEl = document.createElement('div');
                            taskEl.className = `task ${taskData.className}`;
                            taskEl.innerHTML = `<i class="task-icon ${taskData.icon}"></i> ${taskData.title}`;
                            taskEl.dataset.taskIndex = j;
                            
                            taskEl.addEventListener('click', (e) => {
                                const index = e.currentTarget.dataset.taskIndex;
                                showTaskDetails(tasks[index]);
                            });
                            hourSlot.appendChild(taskEl);
                        }
                        dayColumn.appendChild(hourSlot);
                    }
                    calendarGrid.appendChild(dayColumn);
                }
                 // Set current week label
                const endDate = new Date(startDate);
                endDate.setDate(startDate.getDate() + 6);
                document.getElementById('currentWeek').textContent = 
                    `${startDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} - ${endDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}`;
            }

            // --- Show Task Details in Modal ---
            function showTaskDetails(task) {
                document.getElementById('modalTaskIcon').className = `fas ${task.icon} me-2`;
                document.getElementById('modalTaskTitle').textContent = task.title;
                document.getElementById('modalTaskTime').textContent = task.time;
                document.getElementById('modalTaskCategory').textContent = task.category;
                document.getElementById('modalTaskDescription').innerHTML = task.description;
                
                const benefitsList = document.getElementById('modalTaskBenefits');
                benefitsList.innerHTML = '';
                task.benefits.forEach(benefit => {
                    const li = document.createElement('li');
                    li.innerHTML = `<i class="fas fa-check-circle me-2 text-success"></i> ${benefit}`;
                    benefitsList.appendChild(li);
                });

                document.getElementById('modalTaskReferences').innerHTML = task.references;
                myModal.show();
            }

            generateCalendar();
        });
    </script>
</body>
</html>